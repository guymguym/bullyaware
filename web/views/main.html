<!DOCTYPE html>
<html ng-app="bullyaware_app">

<head>
	<?# def.include( 'common_head.html') ?>

		<style type="text/css">
		h1, h2, h3, h4, h5, h6, p, a, span, div {
			/*font-family:'Open Sans', sans-serif !important;*/
		}
		.lights-off {
			background-color: black;
		}
		.lights-on {
			background-color: white;
		}
		#bg {
			position: fixed;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			background: url('/public/img/5907015_l.jpg') no-repeat center center fixed;
			-webkit-background-size: cover;
			-moz-background-size: cover;
			-o-background-size: cover;
			background-size: cover;
		}
		.bx {
			display: none;
			padding-top: 30px;
		}
		.bgx {
			background-color: rgba(255, 255, 255, 0.75);
			border: 2px solid rgba(255, 255, 255, 0.95);
			border-radius: 10px;
			padding: 10px 20px 10px 20px;
		}
		.lights-on .bgx {
			background-color: #f0f0f0;
			border: 2px solid #e0e0e0;
		}
		#footer {
			position: fixed;
			left: 0;
			right: 0;
			bottom: 0;
			background-color: white;
			padding: 20px;
			margin-top: 20px;
			border: solid 1px black;
		}
		body {
			padding-bottom: 100px;
		}
		.css-form input.ng-invalid.ng-dirty {
			background-color: rgba(250, 150, 150, 0.3);
		}
		.css-form input.ng-valid.ng-dirty {
			background-color: rgba(150, 200, 250, 0.3);
		}
		</style>
</head>

<body ng-controller="BullyCtrl" ng-cloak class="lights-off">

	<div id="bg" style="display: none"></div>

	<div class="container" style="margin-top: 0px">

		<div class="row">
			<div class="col-xs-12">
				<div id="box_header" class="bx">
					<div class="bgx">
						<h3>BullyAware. Always vigilant.</h3>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-sm-6">

				<div id="box_welcome" class="bx">
					<div class="bgx">
						<h3>Someone you know might be the target of cyber-bullying</h3>
					</div>
				</div>

				<div id="box_example" class="bx">
					<div class="bgx">
						<h5>
							Click for a distress-level analysis example &nbsp;
							<button class="btn btn-primary" ng-click="check()">
								<i class="icon-arrow-right"></i>	
							</button>
						</h5>
					</div>
				</div>

				<div id="box_description" class="bx">
					<div class="bgx">
						<!-- <h3 id="about_us">About</h3> -->
						<p class="lead">
							In an age of fast and blurry communication BullyAware allows you to monitor cyber-bullying, and get notified on abusive and offensive social messages - Sign up to protect your loved ones.
						</p>
					</div>
				</div>

				<div id="box_signup" class="bx">
					<div class="bgx">
						<form id="signup_form" name="form" role="form" novalidate class="css-form">
							<h3>Subscribe</h3>
							<h5>Get personal monitoring and alerts on up to 10 social media users.</h5>

							<div class="form-group">
								<input id="user_email" required ng-model="user_email" type="email" class="form-control" placeholder="Your email address" autocomplete="off" ng-readonly="user" name="email" />
							</div>

							<div class="form-group">
								<input id="user_password" required ng-model="user_password" type="password" class="form-control" placeholder="Choose password" ng-readonly="user" name="password" />
							</div>

							<div class="form-group">
								<input id="user_password2" required ng-model="user_password2" type="password" class="form-control" placeholder="Retype password" ng-readonly="user" name="password2" />
							</div>

							<div class="form-group">
								<select class="form-control" required ng-model="user_role" ng-change="on_user_role()">
									<option value="" disabled>You are a...</option>
									<option value="parent">Parent</option>
									<option value="teenager">Teenager</option>
									<option value="other">Other</option>
								</select>
							</div>

							<div class="form-group">
								<label>Interested in:</label>&nbsp;
								<span ng-repeat="type in account_types" title="{{type.name}}" ng-click="on_click_account_type(type)" style="cursor: pointer">
									<i style="color: {{type.checked && type.color || '#d0d0d0'}}" class="{{type.icon}} icon-2x icon-fixed-width"></i>
								</span>
							</div>

							<div class="form-group">
								<button class="btn btn-primary form-control" ng-click="signup()">
									Sign Up
								</button>
							</div>

						</form>

						<div id="thanks" style="display: none">
							<h3>Thank you!</h3>
							<h5>We will contact you as soon as possible to this email address:</h5>
							<h5>
								<b>{{ user && user.email || 'HOLDER' }}</b>
								<a href="/user/logout">
									<small>logout</small>
								</a>
							</h5>
						</div>
					</div>
				</div>


			</div>

			<div class="col-sm-6">

				<div id="box_results" class="bx">
					<div class="bgx">
						<h3>Distress level analysis</h3>
						<div ng-show="!last_result" class="text-center">
							<i class="icon-spin icon-spinner" style="font-size: 40pxl line-height: 60px"></i>
						</div>
						<div ng-show="last_result">

							<h4>Summary</h4>
							<ul class="icons-ul" style="margin-left: 0; color: {{level_to_color(last_result.level)}}">
								<li>
									<i class="icon-li icon-ok"></i>
									Analyzed Twitter account {{last_query}}
								</li>
								<li>
									<i class="icon-li icon-ok"></i>
									Performed text processing on last {{last_result.messages.length}} messages
								</li>
								<li ng-show="is_level_low(last_result.level)">
									<i class="icon-li icon-ok"></i>
									The current status seems to be fine
								</li>
								<li ng-show="is_level_med(last_result.level)">
									<i class="icon-li icon-ok"></i>
									The current status seems to require some attention
								</li>
								<li ng-show="is_level_high(last_result.level)">
									<i class="icon-li icon-ok"></i>
									The current status seems to be problematic and requires serious attention
								</li>
								<li>
									<i class="icon-li icon-ok"></i>
									Monitoring is advised
								</li>
							</ul>

							<h4>Top Priority</h4>
							<ul class="icons-ul" style="margin-left: 0">
								<li ng-repeat="user in last_result.users | limitTo:3" style="padding:0">
									<a ng-href="//twitter.com/{{user.info.screen_name}}" target="_blank" style="color: black">
										<!-- <img ng-src="{{user.info.profile_image_url}}" width="40" height="40" style="border: solid 2px white"/> -->
										<i class="icon-li icon-user icon-fixed-width"></i>
										<b>{{ user.info.name }}</b>
									</a>
									<ul class="icons-ul" style="margin-left: 0">
										<li ng-repeat="msg in user.messages | limitTo:3" style="padding:0">
											<i class="icon-li icon-twitter icon-fixed-width" style="color: {{level_to_color(msg.level)}}"></i>
											{{ msg.text }}
										</li>
									</ul>
								</li>
							</ul>

							<h4>Timeline</h4>
							<p>Click on the points to see the related message</p>
							<div id="graph"></div>
						</div>
					</div>
				</div>

				<div id="box_check" class="bx">
					<div class="bgx">
						<h3>Try it</h3>
						<h5>Enter another Twitter account to check now:</h5>
						<div class="form-group input-group">
							<div class="input-group-btn">
								<!-- UNUSED DROPDOWN -->
								<button type="button" class="btn btn-default TODO-dropdown-toggle" data-toggle="TODO-dropdown" ng-click="on_tryit_account_type()">
									<i class="{{account_type.icon}} icon-large icon-fixed-width" style="color: {{account_type.color}}"></i>
									<span ng-show="false" class="caret"></span>
								</button>
								<ul class="dropdown-menu text-left">
									<li ng-repeat="type in account_types">
										<a href="#" ng-click="choose_account_type(type)">
											<i class="{{type.icon}} icon-2x icon-fixed-width" style="color: {{type.color}}"></i>
											{{type.name}}
										</a>
									</li>
								</ul>
							</div>

							<input id="target_account" ng-model="target_account" type="text" class="form-control" placeholder="Enter {{account_type.name}} account" autocomplete="on" />

							<div class="input-group-btn">
								<button type="button" class="btn btn-primary" ng-click="check()">
									<i class="icon-arrow-right icon-large icon-fixed-width"></i>
								</button>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<div style="margin-left: 10px">
						<b>BullyAware.co</b>
						&nbsp;
						<a href="#about_us" ng-click="on_about_us()">
							<i class="icon-info-sign icon-large icon-fixed-width"></i>
							About us
						</a>
						&nbsp;
						<a ng-href="mailto:info@bullyaware.co?subject=Hi There   (id {{session_id}},{{user._id}})" target="_blank" ng-click="on_contact_us()">
							<i class="icon-envelope icon-large icon-fixed-width"></i>
							Contact us
						</a>
						&nbsp;
						<a ng-href="mailto:info@bullyaware.co?subject=Support Call   (id {{session_id}},{{user._id}})" target="_blank" ng-click="on_support()">
							<i class="icon-question-sign icon-large icon-fixed-width"></i>
							Support
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- server data is safely embedded in a JSON type script -->
	<script id="server_data" type="application/json">
	<?= JSON.stringify(it) ?>
	</script>

	<?# def.include( 'common_scripts.html') ?>
		<script src="/public/js/d3.v3.min.js" charset="utf-8"></script>


</body>

</html>
